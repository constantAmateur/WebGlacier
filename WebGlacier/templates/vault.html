{% from "macros.html" import list_vault_contents %}
{% extends "base.html" %}
{% block title %} {{vault.name}} {% endblock %}
{% block body %}
<h1> {{ vault.name }} </h1>
  <div class='nav'>
      {% if vault.lock %}
        <img src="/static/icons/PNG/dark/24px/24_lock.png" alt="Vault Locked" height="24" width="24">
      {% else %}
        {% if inv_job != None %}
          <a href="{{ inv_job }}" title="Force populate from completed job" class='inventory-link'>Populate</a>
        {% else %}
          <a href="action/getinventory" title="Populate from glacier" class='inventory-link'>Request</a>
        {% endif %}
      {% endif %}
  </div>
  <div id="header_options">
    <table>
      <tr>
        <form action="/glacier/" id="vault_select">
        <td><b>Change Vault: </b></td>
        <td>      
          <select name='vault_select'>
          {% for altvault in altvaults %}
            {% if altvault.name==vault.name %}
              <option value="{{altvault.name}}" selected='selected'>{{altvault.name}}</option>
            {% else %}
              <option value="{{altvault.name}}">{{altvault.name}}</option>
            {% endif %}
          {% endfor %}
          </select>
        </td>
        <td>
          <button type='submit' title="Change" class="change-link">
            Change
          </button>
        </td>
        </form>
      </tr>
    {% if not vault.lock %}
      <tr>
        <form action="action/addfile" method=post enctype=multipart/form-data>
        <td><b>Add Archive: </b></td>
        <td><input type=file name=file></td>
        <td>
          <button type='submit' title="Upload" class="upload-link">
            Upload
          </button>
        </td>
        </form>
      </tr>
    {% endif %}
    </table>
    {#{% if vault.lock %}
      <h1><em> VAULT LOCKED! </em></h1>
      No archives can be added or removed until inventory job has completed.
    {% else %}
      <h3> <a href="action/getinventory">Load archive data from server</a></h3>
      {% endif %}#}
  </div>

  {{ list_vault_contents(vault) }}
{% endblock %}
